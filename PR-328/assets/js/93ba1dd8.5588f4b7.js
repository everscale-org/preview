"use strict";(self.webpackChunkeverscale_docs_website=self.webpackChunkeverscale_docs_website||[]).push([[5250],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,r=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=l(a),d=s,m=p["".concat(c,".").concat(d)]||p[d]||h[d]||r;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function m(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=a.length,o=new Array(r);o[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:s,o[1]=i;for(var l=2;l<r;l++)o[l]=a[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},510:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var n=a(7462),s=(a(7294),a(3905));const r={},o="Transactions",i={unversionedId:"arch/transactions",id:"arch/transactions",title:"Transactions",description:"Let\u2019s once again recall that all interactions on Evercale network are performed via messages. Messages, in turn, create transactions that modify the account's state.",source:"@site/../../src/arch/50-transactions.md",sourceDirName:"arch",slug:"/arch/transactions",permalink:"/preview/PR-328/arch/transactions",draft:!1,editUrl:"https://github.com/everscale-org/docs/edit/main/.build/website/../../src/arch/50-transactions.md",tags:[],version:"current",lastUpdatedAt:1683174230,formattedLastUpdatedAt:"May 4, 2023",sidebarPosition:50,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Message",permalink:"/preview/PR-328/arch/message"},next:{title:"Security",permalink:"/preview/PR-328/arch/security"}},c={},l=[{value:"Message",id:"message",level:2},{value:"Transaction\u200b",id:"transaction",level:2},{value:"Transaction phases",id:"transaction-phases",level:2},{value:"Specification",id:"specification",level:2}],u={toc:l},p="wrapper";function h(e){let{components:t,...r}=e;return(0,s.kt)(p,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"transactions"},"Transactions"),(0,s.kt)("p",null,"Let\u2019s once again recall that all interactions on Evercale network are performed via messages. Messages, in turn, create transactions that modify the account's state. "),(0,s.kt)("h2",{id:"message"},"Message"),(0,s.kt)("p",null,"A message consists of: ",(0,s.kt)("inlineCode",{parentName:"p"},"header")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"body"),". The header contains the information about the sender, receiver, value as well as the information required by the validator to apply the message to the block. The message body, in turn, comprises the payload of VM instructions that are necessary for the execution of the smart contract."),(0,s.kt)("p",null,"There are three types of messages on Everscale:"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Inbound external message")," - a message sent from outside onto the Everscale blockchain. It can be sent by any actor outside the blockchain. So-called messages from nowhere. Inbound external messages initiate changes to the blockchain\u2019s state. It is important to mention that external messages can not be value-bearing. They can only declare intent to transfer value to another account."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Internal message"),": a message sent from one contract to another. Like an inbound external message, it updates the blockchain's state. Only internal messages can be value-bearing."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Outbound external message"),": a message that can be emitted by a smart contract. Off-chain participants can subscribe to events within the Everscale network and receive them."),(0,s.kt)("p",null,(0,s.kt)("img",{src:a(3445).Z,width:"1607",height:"1924"})),(0,s.kt)("h2",{id:"transaction"},"Transaction\u200b"),(0,s.kt)("p",null,"A transaction is the result of an inbound message processing by a recipient account code. That is, when an account receives an inbound message, it leads to the computation of the account's new state and the possibility of generating one or more outbound messages with the account serving as the source. The inbound message and the previous state of the account serve as inputs for the transaction, while the generated outbound messages and the next state of the account serve as outputs. This relationship can be represented as a Directed Acyclic Graph (DAG)."),(0,s.kt)("p",null,(0,s.kt)("img",{src:a(4621).Z,width:"1607",height:"1080"})),(0,s.kt)("h2",{id:"transaction-phases"},"Transaction phases"),(0,s.kt)("p",null,"A transaction is composed of several phases. Each phase may either complete successfully or result in an error. In case of error, the next stage is not completed."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Storage phase")," - is for the collection of storage payments for the account state (smart contract code and data). Throughout this phase, the smart contract may be frozen if its balance is insufficient to pay the storage fee. It is worth mentioning that there is no storage phase if the transaction is sent to deploy a new smart contract."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Credit phase")," - adding the value of the internal message received to the account's balance."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Computing phase")," - starts when the smart contract code is invoked inside an instance of TVM with appropriate parameters, including the inbound message and the account's persistent data. The result of this phase is an exit code, new persistent data, and an action list, which includes outbound messages to be sent. Also, it may end up creating a new account, uninitialized or active, or activating a previously uninitialized or frozen account. The gas fee for computation is deducted from the account balance."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Action phase")," - starts when the actions from the actions list are performed if the smart contract is executed successfully (with exit code 0 or 1). Suppose, it is impossible to perform all the actions. For example, because of insufficient funds to transfer with an outbound message. In that case, the transaction is terminated, and the account state is rolled back."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Bounce phase")," - starts when a transaction is terminated. That is, the inbound message has its bounce flag set. Respectively, there is an automatically generated outbound message, with the bounce flag clear, transferring the funds back to the sender. It takes the value of the original inbound message, deducts gas and forwarding fees and transfers the resulting amount to the newly generated message. "),(0,s.kt)("h2",{id:"specification"},"Specification"),(0,s.kt)("p",null,"Read more about transactions execution in ",(0,s.kt)("a",{parentName:"p",href:"/preview/PR-328/arch/executor#transaction"},"Transaction executor")))}h.isMDXComponent=!0},3445:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/tp-1-9ee8319bf1c60c2cacc7ee61f72b9cdf.svg"},4621:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/tp-2-b9c92898c6cd979a87ce93d59c14285c.svg"}}]);