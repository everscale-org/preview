<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-spec/abi">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">ABI Specification | Docs of Everscale</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://everscale-org.github.io/preview/PR-328/spec/abi/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ABI Specification | Docs of Everscale"><meta data-rh="true" name="description" content="ABI specifies message bodies layout for client to contract and contract to contract interaction."><meta data-rh="true" property="og:description" content="ABI specifies message bodies layout for client to contract and contract to contract interaction."><link data-rh="true" rel="icon" href="/preview/PR-328/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://everscale-org.github.io/preview/PR-328/spec/abi/"><link data-rh="true" rel="alternate" href="https://everscale-org.github.io/preview/PR-328/spec/abi" hreflang="en"><link data-rh="true" rel="alternate" href="https://everscale-org.github.io/preview/PR-328/spec/abi" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/preview/PR-328/assets/css/styles.f34c4408.css">
<link rel="preload" href="/preview/PR-328/assets/js/runtime~main.1fa34deb.js" as="script">
<link rel="preload" href="/preview/PR-328/assets/js/main.abd2b2de.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/preview/PR-328/"><div class="navbar__logo"><img src="/preview/PR-328/img/logo.svg" alt="Everscale Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/preview/PR-328/img/logo.svg" alt="Everscale Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Everscale Docs</b></a><a class="navbar__item navbar__link" href="/preview/PR-328/overview/">Overview</a><a class="navbar__item navbar__link" href="/preview/PR-328/develop/">Build</a><a class="navbar__item navbar__link" href="/preview/PR-328/validate/">Validate</a><a class="navbar__item navbar__link" href="/preview/PR-328/standard/">Standards</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/preview/PR-328/spec/">Specifications</a><a class="navbar__item navbar__link" href="/preview/PR-328/arch/">Architecture</a><a href="https://everscale.guide/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Crash Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/preview/PR-328/contribute/">Contribute</a><a href="https://blog.everscale.network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://monitoring.ever.rs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/everscale-org/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/preview/PR-328/">Welcome to Everscale</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/preview/PR-328/overview">Overview</a><button aria-label="Toggle the collapsible sidebar category &#x27;Overview&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/preview/PR-328/develop">Build</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/preview/PR-328/validate">Run Validator</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/preview/PR-328/spec">Specifications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Specifications&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/preview/PR-328/spec/abi">ABI Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/preview/PR-328/spec/remp">REMP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/preview/PR-328/spec/depool-specification">DePools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/preview/PR-328/spec/debot-specifications">DeBot</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/preview/PR-328/standard">Standards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Standards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/preview/PR-328/arch">Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/preview/PR-328/contribute">Contribute</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contribute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/preview/PR-328/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/preview/PR-328/spec"><span itemprop="name">Specifications</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ABI Specification</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Smart Contracts ABI v2.3 Specification</h1><p>ABI specifies message bodies layout for client to contract and contract to contract interaction.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>Each type has max bit and max ref size:</p><ul><li><code>intN/uintN</code> — N bits, 0 refs</li><li><code>varint16/varuint16</code> — 124 bits, 0 refs</li><li><code>varint32/varuint32</code> — 253 bits, 0 refs</li><li><code>address</code> — 591 bits, 0 refs</li><li><code>bool</code> — 1 bit, 0 refs</li><li><code>bytes/cell/string</code> — 0 bit, 1 ref</li><li><code>array</code> — 33 bit, 1 ref</li><li><code>mapping</code> — 1 bit, 1 ref</li><li><code>optional(T)</code> — (1 bit, 1 ref) if <code>optional</code> is <a href="#optionalinnertype">large</a>. Otherwise, (<code>1 bit + maxBitQty(T), maxRefQty(T)</code>)</li></ul><p><code>structure (aka tuple)</code> type is considered as a sequence of its types when we encode the function parameters. That&#x27;s why <code>tuple</code> type doesn&#x27;t have max bit or max ref size. Nested <code>tuple</code>&#x27;s also are considered as a sequence of its types. For example:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">A</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint8</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint16</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">B</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint24</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  A a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint32</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>structure <code>B</code> is considered as a sequence of <code>uint24</code>, <code>uint8</code>, <code>uint16</code>, <code>uint32</code> types.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-the-message">Encoding the message<a href="#encoding-the-message" class="hash-link" aria-label="Direct link to Encoding the message" title="Direct link to Encoding the message">​</a></h2><p><code>Message X</code> contains the field <code>body</code>. If encoded <code>body</code> fits in the cell, then the body is inserted in the cell (<code>Either X</code>). Otherwise, <code>body</code> is located in the reference (<code>Either ^X</code>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-the-body-of-the-message">Encoding the body of the message<a href="#encoding-the-body-of-the-message" class="hash-link" aria-label="Direct link to Encoding the body of the message" title="Direct link to Encoding the body of the message">​</a></h2><p>The body of the message is a tree of cells that contains the function ID and encoded function arguments. External messages body is prefixed with function header parameters.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-header-for-external-messages">Encoding header for external messages<a href="#encoding-header-for-external-messages" class="hash-link" aria-label="Direct link to Encoding header for external messages" title="Direct link to Encoding header for external messages">​</a></h3><p>Function header has up to 3 optional parameters and mandatory signature. Function ID and function parameters are put after header parameters.</p><p>Maximum header size is calculated as follows (no references used).</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">maxHeader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hasSignature </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hasPubkey </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">256</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hasTime </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hasExpire </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-of-function-id-and-its-arguments">Encoding of function ID and its arguments<a href="#encoding-of-function-id-and-its-arguments" class="hash-link" aria-label="Direct link to Encoding of function ID and its arguments" title="Direct link to Encoding of function ID and its arguments">​</a></h3><p>Function ID and the function arguments are located in the chain of cells. The last reference of each cell (except for the last cell in the chain) refers to the next cell. After adding the current parameter in the current cell we must presume an invariant (rule that stays true for the object) for our cell: number of unassigned references in the cell must be not less than 1 because the last cell is used for storing the reference on the next cell. When we add a specific value of some function argument to the cell we assume that it takes the max bit and max ref size. Only if the current parameter (by max bit or max ref size) does not fit into the current cell then we create new cell and insert the parameter in the new cell.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p><strong>But</strong> If current argument and all the following arguments fit into the current cell by max size then we push the parameters in the cell.</p></div></div><p>In the end we connect the created cells in the chain of cells.</p><p>For example:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">address</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">address</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we create 2 cells. In the first there is function id and  <code>a</code>. There may be not more than 32+591=623 bits. It&#x27;s not more than 1023. The next parameter <code>b</code> can&#x27;t fit into the first cell. In the second cell there is only <code>b</code>.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">mapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token builtin">uint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">mapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token builtin">uint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">mapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token builtin">uint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">mapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token builtin">uint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first cell: function ID, <code>a</code>, <code>b</code> <code>c</code>, <code>d</code>.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint32</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Function ID, <code>a</code>, <code>b</code>, <code>c</code> are located in the first cell. <code>d</code> and <code>e</code> fit in the first cell by max size. That&#x27;s why we push all parameter in the fist cell.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">A</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">string</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">string</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">string</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">string</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">A a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint32</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Same as previous example, only one cell.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We use 3 cells. In the first cell there are function Id, <code>a</code>, <code>b,</code> <code>c</code>. In the second - <code>d</code>, <code>e</code>, <code>f</code>, <code>g</code>. In the third - <code>h</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-body">Message body<a href="#message-body" class="hash-link" aria-label="Direct link to Message body" title="Direct link to Message body">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-inbound-messages">External Inbound Messages<a href="#external-inbound-messages" class="hash-link" aria-label="Direct link to External Inbound Messages" title="Direct link to External Inbound Messages">​</a></h3><p>Message body with encoded function call has the following format:</p><p><code>Maybe(Signature)</code> +  <code>Enc(Header)</code> +<code>Function ID</code> +  <code>Enc(Arguments)</code></p><p>First comes an optional signature. It is prefixed by one bit flag that indicates the signature presence. If it is <code>1</code>, then in the next <code>512 bit</code> a signature is placed, otherwise the signature is omitted.</p><p>Then сomes the encoded header parameters set  (same for all functions).</p><p>It is followed by <strong><em>32 bits</em></strong> of function ID identifying which contract functions are called. The <code>function ID</code> comes within the first <code>32 bits</code> of the <code>SHA256</code> hash of the function signature.</p><p>The highest bit is set to <code>0</code> for function ID in external inbound messages, and to <code>1</code> for external outbound messages.</p><p>Function parameters are next. They are encoded in compliance with the present specification and stored either to the root cell or the next one in the chain.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>An encoded parameter cannot be split between different cells</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-outbound-messages">External Outbound Messages<a href="#external-outbound-messages" class="hash-link" aria-label="Direct link to External Outbound Messages" title="Direct link to External Outbound Messages">​</a></h3><p>External outbound messages are used to return values from functions or to emit events.</p><p>Return values are encoded and put into the message response:</p><p><code>Function ID</code>+<code>Enc(Return values)</code></p><p>Function ID&#x27;s highest bit is set to <code>1</code>.</p><p>Events are encoded as follows:</p><p><code>Event ID</code> + <code>Enc(event args)</code></p><p><code>Event ID</code> - 32 bits of SHA256 hash of the event function signature with highest bit set to <code>0</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="internal-messages">Internal Messages<a href="#internal-messages" class="hash-link" aria-label="Direct link to Internal Messages" title="Direct link to Internal Messages">​</a></h3><p>Internal messages are used for contract-to-contract interaction; they have the following body format:</p><p><code>Function ID</code> + <code>Enc(Arguments)</code></p><p><code>Function ID</code> - 32 bits function id calculated as first 32 bits SHA256 hash of the function signature. The highest bit of function ID is <code>0</code>. Internal messages contain only function calls and no responses.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-body-signing">Message Body Signing<a href="#message-body-signing" class="hash-link" aria-label="Direct link to Message Body Signing" title="Direct link to Message Body Signing">​</a></h2><p>The message body can be protected with a cryptographic signature to identify a user outside the blockchain. In this case, an <em>External inbound message</em> that calls the function carries a user <em>private key</em> signature. This requirement applies only to <em>External inbound messages</em> because <em>Internal inbound messages</em> are generated within the blockchain, and <em>src address</em> can be used to identify the caller.</p><p>If a user does not want to sign a message, bit <code>0</code> should be placed to the root cell start and signature omitted.</p><p>The message body signature is generated from the <em>representation hash</em> of the bag of cells following the signature.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="signing-algorithm">Signing Algorithm<a href="#signing-algorithm" class="hash-link" aria-label="Direct link to Signing Algorithm" title="Direct link to Signing Algorithm">​</a></h2><ol><li>ABI serialization generates bag of cells containing header parameters, function ID and function parameters.
591 free bits are reserved in the root cell for destination address (the maximum size of internal address).</li><li>The root cell data is prepended with actual destination address data without padding to maximum size.</li><li><em>Representation hash</em> of the bag is signed using the <em>Ed25519</em> algorithm.</li><li>Address data is removed from the root cell and replaced with bit <code>1</code> followed by 512 bits of the signature.</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This functionality is added since <code>ABI v2.3</code> and supported staring with <a href="https://github.com/tonlabs/TON-Solidity-Compiler/blob/master/Changelog_TON.md#0640-2022-08-18" target="_blank" rel="noopener noreferrer">0.64.0</a> version of the Solidity compiler.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abi-json">ABI JSON<a href="#abi-json" class="hash-link" aria-label="Direct link to ABI JSON" title="Direct link to ABI JSON">​</a></h2><p>This section describes schema of the smart contracts ABI represented in JSON format.</p><p>Full ABI schema in TypeScript notation:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Abi</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  setTime</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  header</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Param</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  functions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Function</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  events</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fields</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Param</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name builtin">Function</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inputs</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Param</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  outputs</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Param</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Event</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inputs</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Param</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Data</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Param </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Param</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  components</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Param</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where:</p><ul><li><code>version</code> contains string and uses semver semantics. Current version is &quot;2.1&quot;.</li><li><code>functions</code> describes all functions the smart contract can handle.</li><li><code>events</code> describes all external outbound messages (events) produces by smart contract.</li><li><code>data</code> describes Hashmap with public data of the smart contract.</li><li><code>fields</code> describes internal structure of the smart contracts data.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-signature-function-id">Function Signature (Function ID)<a href="#function-signature-function-id" class="hash-link" aria-label="Direct link to Function Signature (Function ID)" title="Direct link to Function Signature (Function ID)">​</a></h2><p>The following syntax is used for defining a signature:</p><ul><li>function name</li><li>list of input parameter types (input list) in parenthesis</li><li>list of return values types (output list) in parenthesis</li><li>ABI version</li></ul><p>Single comma is used to divide each input parameter and return value type from one another. Spaces are not used.</p><p>Parameter and return value names are not included.</p><p>The function name, input and output lists are not separated and immediately follow each other.</p><p>If a function has no input parameters or does not return any values, the corresponding input or output lists are empty (empty parenthesis).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-signature-syntax">Function Signature Syntax<a href="#function-signature-syntax" class="hash-link" aria-label="Direct link to Function Signature Syntax" title="Direct link to Function Signature Syntax">​</a></h3><p><code>function_name(input_type1,input_type2,...,input_typeN)(output_type1,output_type2,...,output_typeM)v2</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="signature-calculation-syntax">Signature Calculation Syntax<a href="#signature-calculation-syntax" class="hash-link" aria-label="Direct link to Signature Calculation Syntax" title="Direct link to Signature Calculation Syntax">​</a></h3><p><code>SHA256(&quot;function_name(input_type1,input_type2,...,input_typeN)(output_type1,output_type2,...,output_typeM)v2&quot;)</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-implementation">Sample Implementation<a href="#sample-implementation" class="hash-link" aria-label="Direct link to Sample Implementation" title="Direct link to Sample Implementation">​</a></h3><p><strong>Function</strong></p><p><code>func(int64 param1, bool param2) -&gt; uint32</code></p><p><strong>Function Signature</strong></p><p><code>func(int64,bool)(uint32)v2</code></p><p><strong>Function Hash</strong></p><p><code>sha256(&quot;func(int64,bool)(uint32)v2&quot;) = 0x1354f2c85b50aa84c2f65ebb8cec69aba0aa3269c21e03e142e014e84ea59649</code></p><p><strong>function ID</strong> then is <code>0x1354f2c8</code> for function call and <code>0x9354f2c8</code> for function response</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-id">Event ID<a href="#event-id" class="hash-link" aria-label="Direct link to Event ID" title="Direct link to Event ID">​</a></h3><p><strong>Event ID</strong> is calculated in the same way as the <strong>function ID</strong> except for cases when the event signature does not contain the list of return values types: <code>event(int64,bool)v2</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="encoding">Encoding<a href="#encoding" class="hash-link" aria-label="Direct link to Encoding" title="Direct link to Encoding">​</a></h2><p>The goal of the ABI specification is to design ABI types that are cheap to read to reduce gas consumption and gas costs. Some types are optimized for storing without write access.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="header-parameter-types">Header parameter types<a href="#header-parameter-types" class="hash-link" aria-label="Direct link to Header parameter types" title="Direct link to Header parameter types">​</a></h2><ul><li><p><code>time</code>: message creation timestamp. Used for replay attack protection, encoded as 64 bit Unix time in milliseconds.</p><p>Rule: the contract should store the timestamp of the last accepted message. The initial timestamp is 0. When a new message is received, the contract should do the following check:</p><p><code>last_time &lt; new_time &lt; now + interval,</code> where</p><p><code>last_time</code> - last accepted message timestamp (loaded from c4 register),</p><p><code>new_time</code> - inbound external message timestamp (loaded from message body),</p><p><code>now</code> - current block creation time (just as <code>NOW</code> TVM primitive),</p><p><code>interval</code> - 30 min.</p><p>The contract should continue execution if these requirements are met. Otherwise, the inbound message should be rejected.</p></li><li><p><code>expire</code>: Unix time (in seconds, 32 bit) after that message should not be processed by contract. It is used for indicating lost external inbound messages.</p><p>Rule:  if contract execution time is less then <code>expire</code> time, then execution is continued. Otherwise, the message is expired, and the transaction aborts itself (by <code>ACCEPT</code> primitive). The client waits for message processing until the <code>expire</code> time. If the message wasn&#x27;t processed during that interval is considered to be expired</p></li><li><p><code>pubkey</code>: public key from key pair used for signing the message body. This parameter is optional. The client decides if he needs to set the public key or not. It is encoded as bit 1 followed by 256 bit of public key if parameter provided, or by bit <code>0</code> if it is not.</p></li><li><p>Header may also contain any of standard ABI types used by custom checks.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-parameter-types">Function parameter types:<a href="#function-parameter-types" class="hash-link" aria-label="Direct link to Function parameter types:" title="Direct link to Function parameter types:">​</a></h3><ul><li><code>uint&lt;M&gt;</code>: unsigned <code>M</code> bit integer. Big-endian encoded unsigned integer stored in the cell-data.</li><li><code>int&lt;M&gt;</code>: two’s complement signed <code>M</code> bit integer. Big-endian encoded signed integer stored in the cell-data.</li><li><code>bool</code>: equivalent to uint1.</li><li>tuple <code>(T1, T2, ..., Tn)</code>: tuple that includes <code>T1</code>, ..., <code>Tn</code>, <code>n&gt;=0</code> types encoded in the following way:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Enc(X(1)) Enc(X(2)) ..., Enc(X(n)); where X(i) is value of T(i) for i in 1..n </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  Tuple elements are encoded as independent values so they can be placed in different cells</p><ul><li><code>T[]</code> is a dynamic array of <code>T</code> type elements. It is encoded as a TVM dictionary.  <code>uint32</code> defines the array elements count placed into the cell body.  <code>HashmapE</code> (see TL-B schema in TVM spec) struct is then added (one bit as a dictionary root and one reference with data if the dictionary is not empty). The dictionary key is a serialized <code>uint32</code> index of the array element, and the value is a serialized array element as <code>T</code> type.</li><li><code>T[k]</code> is a static size array of <code>T</code> type elements. Encoding is equivalent to <code>T[]</code> without elements count</li><li><code>bytes</code>: an array of <code>uint8</code> type elements. The array is put into a separate cell. In the case of array overflow, the maximum cell-data size it&#x27;s split into multiple sequential cells.<ul><li>Note: contract stores this type as-is without parsing. For high-speed decoding, cut reference from body slice as <code>LDREF</code>. This type is helpful if some raw data must be stored in the contract without write or random access to elements.</li><li>Note: analog of <code>bytes</code> in Solidity. In C lang can be used as <code>void*</code>.</li></ul></li><li><code>fixedbytes&lt;M&gt;</code>: a fixed-size array of <code>M</code> <code>uint8</code> type elements. Encoding is equivalent to <code>bytes</code></li><li><code>map(K,V)</code> is a dictionary of <code>V</code> type values with <code>K</code> type key. <code>K</code> may be any of <code>int&lt;M&gt;/uint&lt;M&gt;</code> types with <code>M</code> from <code>1</code> to <code>1023</code>. Dictionary is encoded as  <code>HashmapE</code> type (one bit put into cell data as dictionary root and one reference with data is added if the dictionary is not empty).</li><li><code>address</code> is an account address in TON blockchain. Encoded as <code>MsgAddress</code> struct (see TL-B schema in TON blockchain spec).</li><li><code>cell</code>: a type for defining a raw tree of cells. Stored as a reference in the current cell. Must be decoded with <code>LDREF</code>  command and stored as-is.<ul><li>Note: this type is useful to store payloads as a tree of cells analog to contract code and data in the form of <code>StateInit</code> structure of <code>message</code> structure.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cell-data-overflow">Cell Data Overflow<a href="#cell-data-overflow" class="hash-link" aria-label="Direct link to Cell Data Overflow" title="Direct link to Cell Data Overflow">​</a></h2><p>If parameter data does not fit into the available space of the current cell-data, it moves to a separate new cell. This cell is attached to the current one as a reference. The new cell then becomes the current cell.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cell-reference-limit-overflow">Cell Reference Limit Overflow<a href="#cell-reference-limit-overflow" class="hash-link" aria-label="Direct link to Cell Reference Limit Overflow" title="Direct link to Cell Reference Limit Overflow">​</a></h2><p>For simplicity, this ABI version reserves the last cell-reference spot for cell-data overflow. If the cell-reference limit in the current cell is already reached (save for the reserved spot) and a new cell is required, the current cell is considered complete, and a new one is generated. The reserved spot stores the reference to the new cell, and it continues with the new cell as a current one.</p><p>The last cell reference can be used by parameter serialization which needs reference (<code>cell</code>, <code>bytes</code>, <code>map</code>, <code>array</code> types) if all the following parameters can fit into current cell.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contract-interface-specification">Contract Interface Specification<a href="#contract-interface-specification" class="hash-link" aria-label="Direct link to Contract Interface Specification" title="Direct link to Contract Interface Specification">​</a></h2><p>The contract interface is stored as a JSON file called contract ABI. It includes all public functions with data described by ABI types. Below is a structure of an ABI file:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ABI version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;header&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;functions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;getters&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;events&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Getters is a list of get methods which might be called on local TVM.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="header">Header<a href="#header" class="hash-link" aria-label="Direct link to Header" title="Direct link to Header">​</a></h3><p>This section describes additional parameters of functions within the contract. Header-specific types are specified as strings with the type <code>name</code>. Other types are specified as function parameter type (see <a href="#functions">Functions</a>))</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;header&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;header_type&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;param_name&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;param_type&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example</p><div class="language-json5 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json5 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;header&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;time&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;expire&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;custom&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;int256&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h3><p>Specifies each interface function signature, including its name, input, and output parameters. Functions specified in the contract interface can be called from other contracts or from outside the blockchain via ABI call.</p><p>Functions section has the following fields:</p><div class="language-json5 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json5 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;functions&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;method_name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;inputs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {&quot;name&quot;: &quot;func_name&quot;, &quot;type&quot;: &quot;ABI_type&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;outputs&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;0xXXXXXXXX&quot;, //optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>name</code>: function name;</li><li><code>inputs</code>: an array of objects, each containing:<ul><li><code>name</code>: parameter name;</li><li><code>type</code>: the canonical parameter type.</li><li><code>components</code>: used for tuple types, optional.</li></ul></li><li><code>id</code>: an optional <code>uint32</code> <code>id</code> parameter can be added. This <code>id</code> will be used as a <code>Function ID</code> instead of automatically calculated. PS: the last case can be used for contracts that are not ABI-compatible.</li><li><code>outputs</code>: an array of objects similar to <code>inputs</code>. It can be omitted if the function does not return anything;</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events">​</a></h3><p>This section specifies the events used in the contract. An event is an external outbound message with ABI-encoded parameters in the body.</p><div class="language-json5 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json5 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;events&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;event_name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;inputs&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;0xXXXXXXXX&quot;, //optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>inputs</code> have the same format as for functions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data">Data<a href="#data" class="hash-link" aria-label="Direct link to Data" title="Direct link to Data">​</a></h3><p>This section covers the contract global public variables.</p><div class="language-json5 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json5 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;var_name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;abi_type&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;key&quot;: &quot;&lt;number&gt;&quot; // index of variable in contract data dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fields">Fields<a href="#fields" class="hash-link" aria-label="Direct link to Fields" title="Direct link to Fields">​</a></h3><p>It describes internal structure of the smart contracts data. This section helps to decode contract data with TON-SDK function <a href="https://github.com/tonlabs/ever-sdk/blob/ed05ce7b9305d0e825616efb8e9295b63406b8bb/docs/reference/types-and-methods/mod_abi.md#decode_account_data" target="_blank" rel="noopener noreferrer">decode_account_data</a></p><p>Structure of the smart contract data is described as a list of variables names with corresponding data types.
It includes contract state variables and some internal contract specific hidden variables.
They are listed in the order in which they are stored in the data field of the contract.
Example for a Solidity contract <a href="https://github.com/tonlabs/samples/blob/master/solidity/5_BankClient.sol" target="_blank" rel="noopener noreferrer">BankClient</a>:</p><p>Contract state variables:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">contract</span><span class="token plain"> </span><span class="token class-name">BankClient</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> creditLimit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// allowed credit limit;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> totalDebt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// contract total debt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// contract balance;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// inbound message value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Fields section of the abi file:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;_pubkey&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint256&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;_timestamp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint64&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;_constructorFlag&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;bool&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;creditLimit&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint256&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;totalDebt&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint256&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;balance&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint256&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint256&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="types">Types<a href="#types" class="hash-link" aria-label="Direct link to Types" title="Direct link to Types">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bool"><code>bool</code><a href="#bool" class="hash-link" aria-label="Direct link to bool" title="Direct link to bool">​</a></h4><p>Boolean type.</p><table><thead><tr><th>Usage</th><th>Usage</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>1 bit, <code>0</code> or <code>1</code></td><td></td></tr><tr><td>JSON</td><td><code>true</code>, <code>false</code></td><td></td></tr><tr><td>JSON (accepts)</td><td><code>true</code>, <code>false</code>, <code>0</code>, <code>1</code>, <code>&quot;true&quot;</code>, <code>&quot;false&quot;</code></td><td><code>0</code>, <code>true</code>, <code>&quot;false&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tuple"><code>tuple</code><a href="#tuple" class="hash-link" aria-label="Direct link to tuple" title="Direct link to tuple">​</a></h4><p>Struct type, consists of fields of different types. All fields should be specified as an array in the <code>components</code> section of the type.</p><p>For example, for structure <code>S</code>:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint32</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint128</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">uint64</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>parameter <code>s</code> of type <code>S</code> would be described like:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;components&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint32&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint128&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;c&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;uint64&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;tuple&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>chain of cells with tuple data types encoded consistently<br>(without splitting value between cells)</td><td></td></tr><tr><td>JSON</td><td>dictionary of struct field names with their values</td><td><code>{&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3}</code></td></tr><tr><td>JSON (accepts)</td><td>mapping of struct field names with their values</td><td><code>{&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3}</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="intn"><code>int&lt;N&gt;</code><a href="#intn" class="hash-link" aria-label="Direct link to intn" title="Direct link to intn">​</a></h4><p>Fixed-sized signed integer, where <code>N</code> is a decimal bit length. Examples: <code>int8</code>, <code>int32</code>, <code>int256</code>.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>N bit, big endian</td><td></td></tr><tr><td>JSON</td><td>string with hex representation</td><td><code>0x12</code></td></tr><tr><td>JSON (accepts)</td><td>number or string with decimal or hexadecimal representation</td><td><code>12</code>, <code>0x10</code>, <code>&quot;100&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="uintn"><code>uint&lt;N&gt;</code><a href="#uintn" class="hash-link" aria-label="Direct link to uintn" title="Direct link to uintn">​</a></h4><p>Fixed-sized unsigned integer, where N is a decimal bit length e.g., <code>uint8</code>, <code>uint32</code>, <code>uint256</code>.
Processed like <code>int&lt;N&gt;</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="varintn"><code>varint&lt;N&gt;</code><a href="#varintn" class="hash-link" aria-label="Direct link to varintn" title="Direct link to varintn">​</a></h4><p><em>New type introduced in 2.1 version.</em></p><p>Variable-length signed integer. Bit length is between <code>log2(N)</code> and <code>8 * (N-1)</code>, where <code>N</code> is equal to 16 or 32, e.g. <code>varint16</code>, <code>varint32</code>.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>4 (N=16) of 5 (N=32) bits that encode byte length of the number <code>len</code><br>followed by <code>len * 8</code> bit number in big endian</td><td></td></tr><tr><td>JSON</td><td>string with hex representation</td><td><code>0x12</code></td></tr><tr><td>JSON (accepts)</td><td>number or string with decimal or hexadecimal representation</td><td><code>12</code>, <code>0x10</code>, <code>&quot;100&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="varuintn"><code>varuint&lt;N&gt;</code><a href="#varuintn" class="hash-link" aria-label="Direct link to varuintn" title="Direct link to varuintn">​</a></h4><p>Variable-length unsigned integer with bit length equal to <code>8 * N</code>, where <code>N</code>is equal to 16 or 32 e.g., <code>varint16</code>, <code>varint32</code>.
Processed like <code>varint&lt;N&gt;</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mapkeytypevaluetype"><code>map(&lt;keyType&gt;,&lt;valueType&gt;)</code><a href="#mapkeytypevaluetype" class="hash-link" aria-label="Direct link to mapkeytypevaluetype" title="Direct link to mapkeytypevaluetype">​</a></h4><p>Hashtable mapping keys of <code>keyType</code> to values of the <code>valueType</code>, e.g., <code>map(int32, address)</code>.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>1 bit (<code>0</code> - for empty mapping, otherwise <code>1</code>) and ref to the cell with dictionary</td><td></td></tr><tr><td>JSON</td><td>dictionary of keys and values</td><td><code>{&quot;0x1&quot;:&quot;0x2&quot;}</code></td></tr><tr><td>JSON (accepts)</td><td>dictionary of keys and values</td><td><code>{&quot;0x1&quot;:&quot;0x2&quot;}</code>, <code>{&quot;2&quot;:&quot;3&quot;,&quot;3&quot;:&quot;55&quot;}</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cell"><code>cell</code><a href="#cell" class="hash-link" aria-label="Direct link to cell" title="Direct link to cell">​</a></h4><p>TVM Cell type.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>stored in a ref</td><td></td></tr><tr><td>JSON</td><td>binary hex data in base64</td><td><code>&quot;te6ccgEBAQEAEgAAH/////////////////////g=&quot;</code></td></tr><tr><td>JSON (accepts)</td><td>binary hex data in base64</td><td><code>&quot;te6ccgEBAQEAAgAAAA==&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="address"><code>address</code><a href="#address" class="hash-link" aria-label="Direct link to address" title="Direct link to address">​</a></h4><p>Contract address type <code>address</code>, consists of two parts: workchain id (wid) and address value.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>2 bits of address type, 1 bit of anycast, wid - 8 bit signed integer and address value - 256 bit unsigned integer</td><td></td></tr><tr><td>JSON</td><td>decimal signed integer and unsigned hexadecimal integer with leading zeros separated by <code>:</code></td><td><code>&quot;123:000000000000000000000000000000000000000000000000000000000001e0f3&quot;</code></td></tr><tr><td>JSON (accepts)</td><td>decimal signed integer and unsigned hexadecimal integer with leading zeros separated by <code>:</code></td><td><code>&quot;123:000000000000000000000000000000000000000000000000000000000001e0f3&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bytes"><code>bytes</code><a href="#bytes" class="hash-link" aria-label="Direct link to bytes" title="Direct link to bytes">​</a></h4><p>Byte string of data.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>cell with data stored in a ref</td><td></td></tr><tr><td>JSON</td><td>binary hex data</td><td><code>&quot;313233&quot;</code></td></tr><tr><td>JSON (accepts)</td><td>binary hex data</td><td><code>&quot;323334&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="fixedbytesn"><code>fixedbytes&lt;N&gt;</code><a href="#fixedbytesn" class="hash-link" aria-label="Direct link to fixedbytesn" title="Direct link to fixedbytesn">​</a></h4><p>Where N is a decimal byte length from 1 to 32. It is denoted in abi as <code>uint&lt;M&gt;</code>,
where <code>M</code> is a bit length and <code>M = 8 * N</code>.
Processed like <code>int&lt;N&gt;</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="string"><code>string</code><a href="#string" class="hash-link" aria-label="Direct link to string" title="Direct link to string">​</a></h4><p>New type introduced in 2.1 version.</p><p>String data.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>cell with data stored in a ref</td><td></td></tr><tr><td>JSON</td><td>string data</td><td><code>&quot;hello&quot;</code></td></tr><tr><td>JSON (accepts)</td><td>string data</td><td><code>&quot;hello&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="optionalinnertype"><code>optional(innerType)</code><a href="#optionalinnertype" class="hash-link" aria-label="Direct link to optionalinnertype" title="Direct link to optionalinnertype">​</a></h4><p><em>New type introduced in 2.1 version.</em></p><p>Value of optional type <code>optional(innerType)</code> can store a value of <code>innerType</code> of be empty.</p><p>Example: <code>optional(string)</code>.</p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>1 bit flag (<code>1</code> - value is stored, otherwise <code>0</code>) and the value itself (according to <code>innerType</code>) if it presents</td><td></td></tr><tr><td>JSON</td><td>according to <code>innerType</code> or <code>null</code> if it is empty</td><td><code>&quot;hello&quot;</code></td></tr><tr><td>JSON (accepts)</td><td>according to <code>innerType</code> or <code>null</code> if it is empty</td><td><code>&quot;hello&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="itemtype"><code>itemType[]</code><a href="#itemtype" class="hash-link" aria-label="Direct link to itemtype" title="Direct link to itemtype">​</a></h4><p>Array of the <code>itemType</code> values. Example: <code>uint256[]</code></p><table><thead><tr><th>Usage</th><th>Value</th><th>Examples</th></tr></thead><tbody><tr><td>Cell</td><td>32 unsigned bit length of the array, 1 bit flag (<code>0</code> if array is empty, otherwise <code>1</code>) and dictionary of keys and values where key is 32 unsigned bit index and value is <code>itemType</code></td><td></td></tr><tr><td>JSON</td><td>list of <code>itemType</code> values in <code>[]</code></td><td><code>[1, 2, 3]</code>, <code>[&quot;hello&quot;, &quot;world&quot;]</code></td></tr><tr><td>JSON (accepts)</td><td>list of <code>itemType</code> values in <code>[]</code></td><td><code>[1, 2, 3]</code>, <code>[&quot;hello&quot;, &quot;world&quot;]</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="getters-section">Getters section<a href="#getters-section" class="hash-link" aria-label="Direct link to Getters section" title="Direct link to Getters section">​</a></h4><p>Getters specification is not yet supported and this section is ignored.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="problem-of-mappings-or-arrays-that-contains-big-structures-as-values">Problem of mappings or arrays that contains &quot;big&quot; structures as values.<a href="#problem-of-mappings-or-arrays-that-contains-big-structures-as-values" class="hash-link" aria-label="Direct link to Problem of mappings or arrays that contains &quot;big&quot; structures as values." title="Direct link to Problem of mappings or arrays that contains &quot;big&quot; structures as values.">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-1">Introduction<a href="#introduction-1" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h3><p>Several months ago we did breaking change in TVM. Opcode <code>DICTSET</code> had worked in this way: <code>if some_data+len(key)+len(value)</code> doesn&#x27;t fit in one cell (<code>1023 bits</code>) then value are stored in ref of cell. Now if it doesn&#x27;t fit in one cell opcode will throw exception.</p><p>We haven&#x27;t faced with this problem because solidity compiler doesn&#x27;t support this feature (mappings or arrays that contain &quot;big&quot; structures as values). We are going to support it but ton-abi throws exception then it generates message.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="solving-of-the-problem">Solving of the problem<a href="#solving-of-the-problem" class="hash-link" aria-label="Direct link to Solving of the problem" title="Direct link to Solving of the problem">​</a></h3><p>To set value in dictionaries (arrays or mappings) we will use opcode <code>DICTSET</code> or <code>DICTSETREF</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (12 + len(key) + maxPossibleValueLength &lt;= 1023) then we use DICTSET.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else we will use DICTSETREF.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12 = 2 + 10 ≥ 2 + log2(keyLength).</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L30" target="_blank" rel="noopener noreferrer">https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L30</a></p><p>Max possible size of value:</p><ul><li><strong>intN/uintN</strong> - <code>N bit</code>.</li><li><strong>address</strong> - <code>591 bit</code>. See <a href="https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L107" target="_blank" rel="noopener noreferrer">https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb#L107</a></li></ul><div class="language-TL-B codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TL-B codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">anycast_info$_ depth:(#&lt;= 30) { depth &gt;= 1 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   rewrite_pfx:(bits depth) = Anycast;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">addr_var$11 anycast:(Maybe Anycast) addr_len:(## 9) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   workchain_id:int32 address:(bits addr_len) = MsgAddressInt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 +          // 11 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 + 5 + 30 + // anycast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9 +          // addr_len</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32 +         // workchain_id:int32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">512          // address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">591</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>bool</strong> - <code>1 bit</code></li><li><strong>bytes/cell</strong> - <code>0 bit</code></li><li><strong>array</strong> - <code>33 bit</code></li><li><strong>mapping</strong> - <code>1 bit</code></li><li><strong>structure</strong> = <code>SUM maxPosibleLenght(member)</code> for member in members</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><ul><li><a href="https://github.com/tonlabs/ever-abi/tree/master/docs" target="_blank" rel="noopener noreferrer">ABI changelog specifications</a></li><li><a href="https://github.com/tonlabs/ever-abi" target="_blank" rel="noopener noreferrer">ABI implementation</a></li><li><a href="https://github.com/broxus/everscale-web-tools/tree/master/abi-parser" target="_blank" rel="noopener noreferrer">ABI parser</a></li><li><a href="https://ever.bytie.moe/serializer" target="_blank" rel="noopener noreferrer">ABI serializer</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/everscale-org/docs/edit/main/.build/website/../../src/spec/10-abi.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-05-11T08:41:32.000Z">May 11, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/preview/PR-328/spec"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Specifications</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/preview/PR-328/spec/remp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">REMP</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#encoding-the-message" class="table-of-contents__link toc-highlight">Encoding the message</a></li><li><a href="#encoding-the-body-of-the-message" class="table-of-contents__link toc-highlight">Encoding the body of the message</a><ul><li><a href="#encoding-header-for-external-messages" class="table-of-contents__link toc-highlight">Encoding header for external messages</a></li><li><a href="#encoding-of-function-id-and-its-arguments" class="table-of-contents__link toc-highlight">Encoding of function ID and its arguments</a></li></ul></li><li><a href="#message-body" class="table-of-contents__link toc-highlight">Message body</a><ul><li><a href="#external-inbound-messages" class="table-of-contents__link toc-highlight">External Inbound Messages</a></li><li><a href="#external-outbound-messages" class="table-of-contents__link toc-highlight">External Outbound Messages</a></li><li><a href="#internal-messages" class="table-of-contents__link toc-highlight">Internal Messages</a></li></ul></li><li><a href="#message-body-signing" class="table-of-contents__link toc-highlight">Message Body Signing</a></li><li><a href="#signing-algorithm" class="table-of-contents__link toc-highlight">Signing Algorithm</a></li><li><a href="#abi-json" class="table-of-contents__link toc-highlight">ABI JSON</a></li><li><a href="#function-signature-function-id" class="table-of-contents__link toc-highlight">Function Signature (Function ID)</a><ul><li><a href="#function-signature-syntax" class="table-of-contents__link toc-highlight">Function Signature Syntax</a></li><li><a href="#signature-calculation-syntax" class="table-of-contents__link toc-highlight">Signature Calculation Syntax</a></li><li><a href="#sample-implementation" class="table-of-contents__link toc-highlight">Sample Implementation</a></li><li><a href="#event-id" class="table-of-contents__link toc-highlight">Event ID</a></li></ul></li><li><a href="#encoding" class="table-of-contents__link toc-highlight">Encoding</a></li><li><a href="#header-parameter-types" class="table-of-contents__link toc-highlight">Header parameter types</a><ul><li><a href="#function-parameter-types" class="table-of-contents__link toc-highlight">Function parameter types:</a></li></ul></li><li><a href="#cell-data-overflow" class="table-of-contents__link toc-highlight">Cell Data Overflow</a></li><li><a href="#cell-reference-limit-overflow" class="table-of-contents__link toc-highlight">Cell Reference Limit Overflow</a></li><li><a href="#contract-interface-specification" class="table-of-contents__link toc-highlight">Contract Interface Specification</a><ul><li><a href="#header" class="table-of-contents__link toc-highlight">Header</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a></li><li><a href="#data" class="table-of-contents__link toc-highlight">Data</a></li><li><a href="#fields" class="table-of-contents__link toc-highlight">Fields</a></li><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a></li></ul></li><li><a href="#problem-of-mappings-or-arrays-that-contains-big-structures-as-values" class="table-of-contents__link toc-highlight">Problem of mappings or arrays that contains &quot;big&quot; structures as values.</a><ul><li><a href="#introduction-1" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#solving-of-the-problem" class="table-of-contents__link toc-highlight">Solving of the problem</a></li></ul></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/everscale-org/job/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Jobs and Vacancy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/files/Everscale_Whitepaper.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/files/Everscale_Litepaper.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Lite Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@everscale.network/search?query=Digest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Digest<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/about/brand" target="_blank" rel="noopener noreferrer" class="footer__link-item">Visual Brand Identity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale.network/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/everscale-org/bounties/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounties<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverscaleSmartContracts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart Contracts Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_validators" target="_blank" rel="noopener noreferrer" class="footer__link-item">Everscale Validators Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/everscaledebots" target="_blank" rel="noopener noreferrer" class="footer__link-item">DeBots Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/everscale" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Workshop</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale.guide/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Crash Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/preview/PR-328/develop/smart-contracts/">EverDev Tutorial</a></li><li class="footer__item"><a href="https://youtu.be/XKMnroPWXek" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart contract architecture<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/YBIaFeaksMY" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart contract development<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/vFAatJO6cBM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Development of DeBots<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tonlabs/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample smart-contracts<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/sdk-samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/TON-Solidity-Compiler/blob/master/API.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Solidity API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/preview/PR-328/spec/abi/">ABI Specification</a></li><li class="footer__item"><a class="footer__link-item" href="/preview/PR-328/standard/TIP-4/">NFT</a></li><li class="footer__item"><a href="https://github.com/tonlabs/tonos-cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.everos.dev/ever-sdk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2020—2023
 <a href="https://everscale.network/">Everscale</a> All rights reserved
  <a href="https://t.me/everscale">Touch</a>
 <br>
 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
    <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
 </a></div></div></div></footer></div>
<script src="/preview/PR-328/assets/js/runtime~main.1fa34deb.js"></script>
<script src="/preview/PR-328/assets/js/main.abd2b2de.js"></script>
</body>
</html>